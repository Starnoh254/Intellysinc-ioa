class s{constructor(){this.metrics={pageLoadTime:0,firstContentfulPaint:0,largestContentfulPaint:0,userInteractions:[]},this.startTime=performance.now()}trackPageLoad(){if("performance"in window){const t=performance.getEntriesByType("navigation")[0];t&&(this.metrics.pageLoadTime=t.loadEventEnd-t.loadEventStart),"PerformanceObserver"in window&&(new PerformanceObserver(a=>{a.getEntries().forEach(r=>{r.name==="first-contentful-paint"&&(this.metrics.firstContentfulPaint=r.startTime)})}).observe({entryTypes:["paint"]}),new PerformanceObserver(a=>{const o=a.getEntries(),r=o[o.length-1];this.metrics.largestContentfulPaint=r.startTime}).observe({entryTypes:["largest-contentful-paint"]}))}}trackInteraction(t,e,n=Date.now()){this.metrics.userInteractions.push({action:t,element:e,timestamp:n,timeFromLoad:n-this.startTime})}trackButtonClick(t){this.trackInteraction("button_click",t)}trackCardInteraction(t,e){this.trackInteraction(`${e}_card`,t)}trackModalInteraction(t,e){this.trackInteraction(`${t}_modal`,e)}getMetrics(){return{...this.metrics,totalTime:performance.now()-this.startTime}}sendMetrics(){const t=this.getMetrics();typeof gtag<"u"&&gtag("event","performance_metrics",{page_load_time:t.pageLoadTime,first_contentful_paint:t.firstContentfulPaint,largest_contentful_paint:t.largestContentfulPaint,total_interactions:t.userInteractions.length})}trackImageLoad(t){const e=new Image,n=performance.now();e.onload=()=>{performance.now()-n,this.trackInteraction("image_load",t,Date.now())},e.onerror=()=>{this.trackInteraction("image_error",t,Date.now()),console.error(`Failed to load image: ${t}`)}}}const c=new s,f=i=>c.trackButtonClick(i);export{c as p,f as t};
