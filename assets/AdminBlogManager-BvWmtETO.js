import{r as o,u as A,j as e,m as p}from"./index-BlDSkOmT.js";import{b as n}from"./blogService-CuuQIaO6.js";const P=()=>{const[x,b]=o.useState([]),[r,g]=o.useState(null),[v,h]=o.useState(!1),[a,c]=o.useState({title:"",excerpt:"",content:"",category:"",author:{name:"",bio:"",twitter:"",linkedin:""},image:"",tags:"",published:!1}),f=A();o.useEffect(()=>{d()},[]);const d=()=>{const t=n.getAllBlogs();b(t)},N=()=>{localStorage.removeItem("adminAuthenticated"),f("/admin/login")},s=t=>{const{name:i,value:l,type:S,checked:D}=t.target;if(i.startsWith("author.")){const u=i.split(".")[1];c(j=>({...j,author:{...j.author,[u]:l}}))}else c(u=>({...u,[i]:S==="checkbox"?D:l}))},y=t=>{t.preventDefault();const i={...a,tags:a.tags.split(",").map(l=>l.trim()).filter(l=>l),slug:n.generateSlug(a.title),author:{...a.author,avatar:a.author.avatar||"/images/freepik/rm378-03c.jpg"}};r?n.updateBlog(r.id,i):n.createBlog(i),m(),d()},C=t=>{g(t),c({title:t.title,excerpt:t.excerpt,content:t.content,category:t.category,author:{name:t.author.name,bio:t.author.bio,twitter:t.author.twitter,linkedin:t.author.linkedin},image:t.image,tags:t.tags.join(", "),published:t.published}),h(!0)},w=t=>{window.confirm("Are you sure you want to delete this blog post?")&&(n.deleteBlog(t),d())},k=t=>{n.togglePublished(t),d()},m=()=>{c({title:"",excerpt:"",content:"",category:"",author:{name:"",bio:"",twitter:"",linkedin:""},image:"",tags:"",published:!1}),g(null),h(!1)},B=["Web Development","Marketing","SEO","Design","Business","Technology"];return e.jsxs("div",{className:"admin-blog-manager",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{children:"Blog Management"}),e.jsxs("div",{className:"admin-actions",children:[e.jsx("button",{className:"add-blog-btn",onClick:()=>h(!0),children:r?"Update Blog":"Add New Blog"}),e.jsx("button",{className:"logout-btn",onClick:N,children:"Logout"})]})]}),v&&e.jsx(p.div,{className:"blog-form-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(p.div,{className:"blog-form",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:r?"Edit Blog Post":"Create New Blog Post"}),e.jsx("button",{className:"close-btn",onClick:m,children:"Ã—"})]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",name:"title",value:a.title,onChange:s,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category *"}),e.jsxs("select",{name:"category",value:a.category,onChange:s,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),B.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Excerpt *"}),e.jsx("textarea",{name:"excerpt",value:a.excerpt,onChange:s,rows:"3",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Content *"}),e.jsx("textarea",{name:"content",value:a.content,onChange:s,rows:"15",placeholder:"Use HTML tags for formatting (e.g., <h2>, <p>, <pre>)",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Featured Image URL"}),e.jsx("input",{type:"url",name:"image",value:a.image,onChange:s,placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",name:"tags",value:a.tags,onChange:s,placeholder:"performance, webdev, optimization"})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"Author Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Author Name *"}),e.jsx("input",{type:"text",name:"author.name",value:a.author.name,onChange:s,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Author Bio"}),e.jsx("textarea",{name:"author.bio",value:a.author.bio,onChange:s,rows:"2"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Twitter URL"}),e.jsx("input",{type:"url",name:"author.twitter",value:a.author.twitter,onChange:s})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"LinkedIn URL"}),e.jsx("input",{type:"url",name:"author.linkedin",value:a.author.linkedin,onChange:s})]})]})]}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"published",checked:a.published,onChange:s}),"Publish immediately"]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:m,className:"cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",className:"submit-btn",children:r?"Update Blog":"Create Blog"})]})]})]})}),e.jsxs("div",{className:"blogs-list",children:[e.jsxs("h2",{children:["All Blog Posts (",x.length,")"]}),e.jsx("div",{className:"blogs-grid",children:x.map(t=>e.jsxs(p.div,{className:"blog-item",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"blog-item-header",children:[e.jsx("span",{className:`status ${t.published?"published":"draft"}`,children:t.published?"Published":"Draft"}),e.jsx("span",{className:"category",children:t.category})]}),e.jsx("h3",{children:t.title}),e.jsx("p",{className:"excerpt",children:t.excerpt}),e.jsxs("div",{className:"blog-meta",children:[e.jsxs("span",{children:["By ",t.author.name]}),e.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"blog-actions",children:[e.jsx("button",{className:"edit-btn",onClick:()=>C(t),children:"Edit"}),e.jsx("button",{className:`publish-btn ${t.published?"unpublish":"publish"}`,onClick:()=>k(t.id),children:t.published?"Unpublish":"Publish"}),e.jsx("button",{className:"delete-btn",onClick:()=>w(t.id),children:"Delete"})]})]},t.id))})]})]})};export{P as default};
